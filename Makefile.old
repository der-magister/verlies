SRC1=init.c engine.c hud.c player.c infoscreen.c lvlstatus.c schilder.c text.c locations.c npc.c map.c truhen.c gegner.c items.c other.c verlies.c lvlgegner.c umgebung.c boss.c

SRCDATMAIN=daten/hud/v_infoscreen.c daten/hud/v_statscreen.c

SRCDATTILESETS=daten/tilesets/felsengrund_1-8-37.c daten/tilesets/stadtgefaengnis-14-37.c daten/tilesets/felsengrund_2-4-19.c daten/tilesets/font-82-127.c daten/tilesets/grundtiles-38-81.c daten/tilesets/felsengrund_3-4-19.c daten/tilesets/wiesen_1-4-37.c daten/tilesets/ogerhoehlen-4-38.c daten/tilesets/feensee-4-37.c

SRCDATSPRITESETS=daten/spritesets/v_spriteset_1.c

SRCDATLVL=tiledat.c tiledatg.c daten/lvl/v_lvl1a.c daten/lvl/v_lvl1b.c daten/lvl/v_lvl1c.c daten/lvl/v_lvl5.c daten/lvl/v_lvl6.c daten/lvl/v_lvl7.c daten/lvl/v_lvl8.c daten/lvl/v_lvl9.c daten/lvl/v_lvl10.c daten/lvl/v_lvl11.c daten/lvl/v_lvl12.c daten/lvl/v_lvl13.c daten/lvl/v_lvl20.c daten/lvl/v_lvl21.c daten/lvl/v_lvl22.c daten/lvl/v_lvl22b.c daten/lvl/v_lvl24.c daten/lvl/v_lvl25.c daten/lvl/v_lvl26.c daten/lvl/v_lvl27.c daten/lvl/v_lvl28.c daten/lvl/v_lvl29.c daten/lvl/v_lvl31.c daten/lvl/v_lvl30.c daten/lvl/v_lvl32.c daten/lvl/v_lvl33.c daten/lvl/v_lvl34.c daten/lvl/v_lvl35.c daten/lvl/v_lvl36.c daten/lvl/v_lvl37.c daten/lvl/v_lvl38.c daten/lvl/v_lvl39.c daten/lvl/v_lvl40.c daten/lvl/v_lvl41.c daten/lvl/v_lvl42.c daten/lvl/v_lvl43.c daten/lvl/v_lvl44.c daten/lvl/v_lvl45.c daten/lvl/v_lvl46.c daten/lvl/v_lvl47.c daten/lvl/v_lvl48.c daten/lvl/v_lvl49.c daten/lvl/v_lvl50.c daten/lvl/v_lvl51.c daten/lvl/v_lvl52.c daten/lvl/v_lvl53.c daten/lvl/v_lvl54.c daten/lvl/v_lvl55.c daten/lvl/v_lvl56.c daten/lvl/v_lvl57.c daten/lvl/v_lvl58.c daten/lvl/v_lvl59.c daten/lvl/v_lvl60.c daten/lvl/v_lvl61.c daten/lvl/v_lvl62.c daten/lvl/v_lvl63.c daten/lvl/v_lvl64.c daten/lvl/v_lvl65.c daten/lvl/v_lvl66.c daten/lvl/v_lvl70.c daten/lvl/v_lvl71.c daten/lvl/v_lvl72.c daten/lvl/v_lvl73.c daten/lvl/v_lvl74.c daten/lvl/v_lvl75.c daten/lvl/v_lvl76.c daten/lvl/v_lvl77.c daten/lvl/v_lvl78.c daten/lvl/v_lvl79.c daten/lvl/v_lvl15.c daten/lvl/v_lvl16.c daten/lvl/v_lvl17.c daten/lvl/v_lvl18.c daten/lvl/v_lvl80.c daten/lvl/v_lvl81.c daten/lvl/v_lvl82.c daten/lvl/v_lvl83.c daten/lvl/v_lvl84.c daten/lvl/v_lvl85.c daten/lvl/v_lvl86.c daten/lvl/v_lvl87.c daten/lvl/v_lvl90.c daten/lvl/v_lvl91.c daten/lvl/v_lvl95.c daten/lvl/v_lvl96.c daten/lvl/v_lvl97.c daten/lvl/v_lvl98.c daten/lvl/v_lvl101.c daten/lvl/v_lvl104.c daten/lvl/v_lvl109.c daten/lvl/v_lvl114.c daten/lvl/v_lvl115.c daten/lvl/v_lvl116.c daten/lvl/v_lvl99.c daten\lvl\v_lvl100.c daten\lvl\v_lvl102.c daten\lvl\v_lvl105.c daten\lvl\v_lvl110.c daten\lvl\v_lvl111.c daten\lvl\v_lvl112.c

SRCSCHILDDAT=daten/txt/schilder/schildtxt1.c daten/txt/schilder/schildtxt1b.c  daten/txt/schilder/schildtxt1c.c  daten/txt/schilder/schildtxt1d.c daten/txt/schilder/schildtxt1e.c gfx/rahmen.c daten/txt/schilder/schluessel.c daten/txt/schilder/schildtxt2.c daten/txt/schilder/schildtxt3.c daten/txt/schilder/schildtxt4.c daten/txt/schilder/schildtxt5.c

SRCTRUHEDAT=daten/txt/truhen/schwerttruhe.c daten/txt/truhen/kartetruhe.c daten/txt/truhen/truheleer.c daten/txt/truhen/erhalten.c daten/txt/truhen/goldvoll.c daten/txt/truhen/proviant.c daten/txt/truhen/ausdauertrank.c daten/txt/truhen/brotbuechse-1.c daten/txt/truhen/schluessel.c daten/txt/truhen/heiltrank.c daten/txt/truhen/geldkatze1.c daten\txt\truhen\magischer_stein.c daten\txt\truhen\wappenrock.c

SRCLOCATONDAT=daten/txt/locations/felsengrund.c daten/txt/locations/stadtgefaengnis.c daten/txt/locations/wiesen.c daten/txt/locations/ogerhoehlen.c daten/txt/locations/feenseedorf.c daten/txt/locations/feensee.c

SRCNPCTXT=daten/txt/npcs/heilertxt1.c daten/txt/npcs/heilertxt2.c daten/txt/npcs/xavertxt1.c daten/txt/npcs/xavertxt2.c daten/txt/npcs/xavertxt3.c daten/txt/npcs/xavertxt4.c daten/txt/npcs/xavertxt5.c daten/txt/npcs/xavertxt6.c daten/txt/npcs/xavertxt7.c daten/txt/npcs/xavertxt8.c daten/txt/npcs/saratxt1.c daten/txt/npcs/saratxt2.c daten/txt/npcs/saratxt3.c daten/txt/npcs/saratxt4.c  daten/txt/npcs/saratxt5.c  daten/txt/npcs/saratxt6.c  daten/txt/npcs/saratxt7.c daten/txt/npcs/phobetxt1.c daten/txt/npcs/phobetxt2.c daten/txt/npcs/phobetxt3.c daten/txt/npcs/xavertxt9.c daten/txt/npcs/xavertxt10.c daten/txt/npcs/xavertxt11.c daten/txt/npcs/fiona-1.c daten/txt/npcs/max-1.c  daten/txt/npcs/hugotxt1.c daten/txt/npcs/hugotxt2.c daten/txt/npcs/hugotxt3.c daten/txt/npcs/hugotxt4.c daten/txt/npcs/provianthaendler1.c daten/txt/npcs/provianthaendler2.c daten/txt/npcs/ausdauerverkaeuferin1.c daten/txt/npcs/ausdauerverkaeuferin2.c daten/txt/npcs/heiltrankverkaeuferin1.c daten/txt/npcs/heiltrankverkaeuferin2.c daten/txt/npcs/ogerboss1.c daten/txt/npcs/ogerboss2.c daten/txt/npcs/hugotxt5.c daten/txt/npcs/hugotxt6.c daten/txt/npcs/hugotxt7.c daten/txt/npcs/hugotxt8.c daten/txt/npcs/xavertxt12.c daten/txt/npcs/xavertxt13.c daten/txt/npcs/xavertxt14.c daten/txt/npcs/xavertxt15.c daten/txt/npcs/xavertxt16.c daten/txt/npcs/xavertxt17.c daten/txt/npcs/zauberstaubhaendler1.c daten/txt/npcs/zauberstaubhaendler2.c daten/txt/npcs/feenaeltestetxt1.c daten/txt/npcs/feenaeltestetxt2.c daten/txt/npcs/feenaeltestetxt3.c daten/txt/npcs/feenaeltestetxt4.c daten/txt/npcs/feenaeltestetxt5.c daten/txt/npcs/feenaeltestetxt6.c

SRCMAPDAT=daten/karten/k_felsengrund.c daten/karten/k_gefaengnis.c daten/karten/nomap.c daten/karten/k_wiesen.c daten/karten/k_oger.c daten/karten/k_dorfseefeen.c daten\karten\k_feensee.c

SRCOTHER=daten/other/gameover.c daten/other/techend.c daten/other/kredits.c daten/other/titel.c daten/txt/other/handelnichtmoeglich.c

SRCLVL=lvl1.c l_stadtgefaengnis.c wiesen.c ogerhoehlen.c feensee.c

SRC=$(SRC1) $(SRCDATMAIN) $(SRCDATTILESETS) $(SRCDATSPRITESETS) $(SRCDATLVL) $(SRCLVL) $(SRCSCHILDDAT) $(SRCLOCATONDAT) $(SRCNPCTXT) $(SRCMAPDAT) $(SRCTRUHEDAT) $(SRCOTHER)

BIN=verlies.gb

#SIZE=medium
SIZE=small

GBDK_Home=c:\apps\gbdk
#GBDK_Home=/opt/gbdk


LIB = $(GBDK_Home)/lib/$(SIZE)/rgbds/gbz80/gbz80.lib $(GBDK_Home)/lib/$(SIZE)/rgbds/gb/gb.lib
CRT0 = $(GBDK_Home)/lib/$(SIZE)/rgbds/gb/crt0.o

OBJ = $(SRC:.c=.o)

CC = $(GBDK_Home)/bin/sdcc -mgbz80 --asm=rgbds -I $(GBDK_Home)/include -I $(GBDK_Home)/include/asm
all: $(BIN)

clean:
	del $(OBJ)
	del *.asm
	del *.map
	del *.sym
	del *.lnk
	del *.gb
	
%.o: %.s

$(BIN):	$(OBJ)
	$(CC) $(CRT0) $(OBJ) $(LIB)
	move a.gb $(BIN)
	rgbfix -p -v -tverlies $(BIN) 
  
$(LIB): $(LIBOBJ)
	xlib $@ a $(LIBOBJ)

%.o: %.c
	$(CC) -c $<

%.asm: %.s
	astorgb.pl $< > $@

%.o: %.asm
	rgbasm -o$@ $<

%.s: %.ms
	maccer -o $@ $<
